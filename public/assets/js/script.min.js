/* Author:
	@adamcbrewer
*/$(function(e){e.floor=$("#floor");e.initDragging=function(){var e=this;this.people=this.floor.find(".person");this.draggable=this.people.draggable({grid:[45,45],containment:"parent",addClasses:!1,create:function(e,t){},start:function(t,n){e.people.not(this).removeClass("dragging");e.people.filter(this).addClass("dragging")},drag:function(e,t){},stop:function(t,n){e.people.removeClass("last-drag").filter(this).addClass("last-drag").removeClass("dragging");e.updatePersonData(this).updateProfile(this)}}).data("draggable")};e.updatePersonData=function(e){var t=parseInt(e.style.top,10),n=parseInt(e.style.left,10);e.setAttribute("data-posx",t);e.setAttribute("data-posy",n);return this},e.updateProfile=function(e){this.profiles.forEach(function(t){t.id==e.getAttribute("data-id")&&(t.data={x:e.getAttribute("data-posx"),y:e.getAttribute("data-posy")});return})};e.placePeopleOnFloor=function(e){this.profiles=e.profiles;var t=this;this.profiles.forEach(function(e,n){t.floor.append(e.avatar)});this.initDragging()};e.socket.on("broadcast",function(e){console.log(e)});e.socket.on("punch-in",function(t){e.placePeopleOnFloor(t)})}(App));